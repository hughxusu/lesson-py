# 任务清单













### 静态方法

静态方法是绑定在类上的单独函数，封装逻辑上属于类，但不依赖于类或任何的实例。它既不能访问实例属性，也不能访问类属性。

```python
class Car:
    total_cars = 0 
    
    def __init__(self, make, model, year):
        self.make = make
        self.model = model
        self.year = year
        
    @staticmethod
    def calculate_distance(arrival):
        print(f'Calculate distance to {arrival}')
        
audi = Car('audi', 'a4', 2020)
audi.calculate_distance('home')
Car.calculate_distance('home')
```

`@staticmethod`定义静态方法的装饰器。

### `__new__`

`__new__` 是一种负责创建类实例的方法，方法默认返回实例对象，该方法是类方法。

```python
class Car:
    def __new__(cls, *args, **kwargs):
        print('Creating instance')
        instance = super().__new__(cls)
        return instance
    
    def __init__(self, make, model, year):
        self.make = make
        self.model = model
        self.year = year
        
audi = Car('audi', 'a4', 2020)    
```

创建实例的完整过程：

1. 调用`__new__`创建一个实例。
2. 调用`__init__`初始化实例中的属性。

单例模式，类属性的应用，全局设计一个App配置工具。

```python
class AppConfig:
    _instance = None

    def __new__(cls):
        if cls._instance is None:
            inst = super().__new__(cls)
            cls._instance = inst
        return cls._instance

c1 = AppConfig()
c2 = AppConfig()
print(c1 is c2)
```

> [!warning]
>
> python通常使用`_xxx`来表示只在类内使用，不再类外使用的属性和方法，这是一种约定俗成写法，不受语法支持。